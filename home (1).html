<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice_Home</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/addons/p5.sound.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="home.css">
</head>

<body style="background-color: black;">
    <div class="row">
        <div class="col-lg-10">
            <div id="actual" style="width: 100%;padding-bottom: 10px;">
                <div class="row">
                    <div class="col-lg-4 col-sm-12 col-xs-12">
                        <h1 class="lot" style="color: rgb(25, 25, 112)
                            ;font-size: 40px;font-weight: bold;margin-top: 10px;margin-left: 10px;">
                            DHWANI</h1>
                    </div>
                    <div class="col-lg-8 col-sm-12 col-xs-12" align="center">
                        <div style="margin-top: 10px;">
                            <button
                                style="height: 50px;border-radius: 10px 0 0 10px;background-color: black;border: 1px solid cyan;font-size: 15px;padding: 13px;padding-left: 20px;"><i
                                    class="fa fa-search" aria-hidden="true"
                                    style="font-size: 17px;color:rgb(0, 217, 255);"></i></button><span><input
                                    type="text" id="search-input" placeholder="Search Here"
                                    style="border-radius: 0 10px 10px 0;padding: 13px;border: 1px solid cyan;"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" style="padding-bottom: 60px;">
        <div class="col-lg-2 col-sm-12 col-xs-12" align="center">
            <h4 style="margin-top: 100px;color: rgb(137, 207, 240);font-weight: bold;">Instructions to use</h4><br>
            <div style="text-align: left;padding-left: 30px;padding-right: 20px;margin-top: 10px;">
                <h6 style="color: black;font-size: 18px;">
                    Please use the following keywords whike using our Voice command based Web Application:
                    click: To click on any </h6><br>
            </div>
        </div>
        <div class="col-lg-8 col-sm-12 col-xs-12">
            <iframe id="searchbox" src="lol.html" title="W3Schools Free Online Web Tutorials"
                style="height: 480px;width: 92%;border: 5px solid rgb(137, 207, 240);border-radius: 10px;margin-left: 4%;margin-right: 4%;"></iframe>
            <h1></h1>
        </div>
        <div class="col-lg-2 col-sm-12 col-xs-12" style="margin-bottom: 100px;">
            <h4 style="margin-top: 100px;color: rgb(137, 207, 240);font-weight: bold;" align="center">Searching for</h4>
            <br>
            <div class="container">
                <div class="chat-container">
                    <div class="message">
                        <p id="mes" style="padding-left: 10px;"></p>
                    </div>
                </div>
            </div>



        </div>
    </div>
    <script src="voice.js"></script>
    <!-- <script>
        var synth = window.speechSynthesis;
        
            let arr=["Welcome to Dhwani","You may speak now!!!"]
            for (let index = 0; index < arr.length; index++) {
                const element = arr[index];
                var utterThis = new SpeechSynthesisUtterance(element);
                    synth.speak(utterThis);
            }
        
    </script> -->
    <script>
        const searchInput = document.querySelector(".message");
        searchInput.addEventListener("keydown", function (event) {
            if (event.code == "enter") {
                searchtyping();
            }
        });
        let link;
        function searchtyping() {
            let input = searchInput.value;
            if (input.substring(0, 4) == 'www.' && input.substring(input.length - 4, input.length) == ".com") {
                document.getElementById("searchbox").src = "https://" + input;
            }
            else {
                document.getElementById("searchbox").src = "https://www.google.com/search?q=" + input + "&rlz=1C5CHFA_enNZ948NZ948&oq=" + input + "&aqs=chrome.0.69i59l2j46i175i199i433j46i199i291i433j46j0i433j0j69i60.875j0j9&sourceid=chrome&ie=UTF-8";
            }
        }
    </script>
    <script>
        let synth = window.speechSynthesis;
        const texts = document.querySelector('.message');

        window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

        const recognition = new SpeechRecognition();
        recognition.interimResults = true;

        let pl = document.getElementById("mes");
        recognition.addEventListener('result', (e) => {
            texts.appendChild(pl);
            const text = Array.from(e.results)
                .map(result => result[0])
                .map(result => result.transcript)
                .join('');

            pl.innerText = text;
            let storage=[];
            let counter=0;
            if (e.results[0].isFinal) {
                if (text.includes("click") == false) {
                    if (text.substring(0, 4) == 'www.' && text.substring(text.length - 4, text.length) == ".com") {
                        document.getElementById("searchbox").src = "https://" + text;
                        storage[counter++]="https://" + text;
                        console.log(storage[counter-1]);
                        p1.innerText = "Recognising" + text;
                    }
                    else if (text == "open geeksforgeeks" || text == "open Geeks for Geeks" || text == "Geeksforgeeks") {
                        document.getElementById("searchbox").src = "https://www.geeksforgeeks.org/";
                        var utterThis = new SpeechSynthesisUtterance(text);
                        synth.speak(utterThis);
                    }
                    else if (text == "open YouTube") {
                        document.getElementById("searchbox").src = "https://www.youtube.com/";
                        if (text == "click history") {
                            document.getElementById("searchbox").src = "https://www.youtube.com/feed/history";
                        }
                        else if (text == "click library") {
                            document.getElementById("searchbox").src = "https://www.youtube.com/feed/library";
                        }
                        else if (text == "click explore") {
                            document.getElementById("searchbox").src = "https://www.youtube.com/feed/explore";
                        }
                        else {
                            document.getElementById("searchbox").src = "";
                        }
                        var utterThis = new SpeechSynthesisUtterance(text);
                        synth.speak(utterThis);
                    }
                    else if (text == "leetcode" || text == "leet code" || text == "Geeksforgeeks") {
                        document.getElementById("searchbox").src = "https://leetcode.com/";
                        var utterThis = new SpeechSynthesisUtterance(text);
                        synth.speak(utterThis);
                    }
                    else {
                        document.getElementById("searchbox").src = "https://www.google.com/search?q=" + text + "&rlz=1C5CHFA_enNZ948NZ948&oq=" + text + "&aqs=chrome.0.69i59l2j46i175i199i433j46i199i291i433j46j0i433j0j69i60.875j0j9&sourceid=chrome&ie=UTF-8";
                        var utterThis = new SpeechSynthesisUtterance(text);
                        synth.speak(utterThis);
                    }
                }
                else{
                    console.log(storage[counter-1]);
                    if(storage.includes("youtube") == false)
                    {
                        if(text=="click history")
                        {
                            document.getElementById("searchbox").src = "https://www.youtube.com/feed/history";
                            
                        }
                        else if(text=="click library")
                        {
                            document.getElementById("searchbox").src = "https://www.youtube.com/feed/library";
                        }
                        else if (text == "click explore") 
                        {
                            document.getElementById("searchbox").src = "https://www.youtube.com/feed/explore";
                        }
                    }
                }

            }
        });


        recognition.addEventListener('end', () => {
            recognition.start();
        })

        recognition.start();
    </script>

</body>

</html>